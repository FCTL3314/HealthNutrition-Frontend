import{_ as P,o as s,a as C,w as x,d as r,f as d,F as f,g as y,t as G,C as M,p as $,i as T,j as V,k as E,l as g,c as L,m as R,E as U,b as i,u as A,P as h,h as W,y as O,B as j,x as k}from"./index-ac1f3b2e.js";import{W as Y}from"./WrappedLoadingSpinner-6c07b2eb.js";import{E as z}from"./ErrorSection-622ee358.js";import{S as H}from"./ShowMoreButton-ef96c41a.js";import{P as J,a as K}from"./ProductCardPlaceholder-a1ca20a5.js";import{B as Q}from"./BaseGreeting-a11d9f9f.js";import{N as X,C as _,a as v}from"./NutritionFacts-964d98c8.js";import{h as N}from"./moment-fbc5633a.js";import"./LoadingSpinner-1cb88d62.js";import"./CommonCardWithImagePlaceholder-692b1814.js";const Z={__name:"ComparisonGroupGreeting",props:{comparisonGroupName:{type:String,required:!0}},setup(n){return(c,t)=>(s(),C(Q,{title:n.comparisonGroupName,description:`The statistics for this comparison group are displayed here, as well as average indicators for the\r
      products of this comparison group. Products that stand out e.g. the most high-calorie product, marked with tags.`},null,8,["title"]))}},tt=P(Z,[["__scopeId","data-v-56067d7d"]]);const ot=n=>($("data-v-57c6d22b"),n=n(),T(),n),et=ot(()=>r("h2",{class:"text-main font-big"},"Statistics",-1)),at={class:"list-group list-group-flush"},st={class:"fw-semibold fs-5"},rt={class:"text-main-light fs-5"},nt={__name:"ComparedProductsStatistic",props:{comparedProductsCount:{type:Number,required:!0},uniqueCategoriesCount:{type:Number,required:!0},lastProductAddedAt:{type:String,required:!0},comparisonGroupCreatedAt:{type:String,required:!0}},setup(n){const c=n,t=[{name:"Compared products",value:c.comparedProductsCount},{name:"Unique categories",value:c.uniqueCategoriesCount},{name:"Last product added",value:N(c.lastProductAddedAt).fromNow()},{name:"Comparison group created",value:N(c.comparisonGroupCreatedAt).fromNow()}];return(u,l)=>(s(),C(M,null,{default:x(()=>[et,r("ul",at,[(s(),d(f,null,y(t,(p,m)=>r("li",{key:m,class:"list-group-item"},[r("span",st,G(p.name)+":Â ",1),r("span",rt,G(p.value),1)])),64))])]),_:1}))}},ct=P(nt,[["__scopeId","data-v-57c6d22b"]]);const it={class:"row text-center component-indentation-bottom"},ut={class:"col-xl-6 mb-3 mb-xl-0 mb-xxl-0"},lt={class:"col-xl-6"},dt={class:"row"},pt=["id"],mt={__name:"ComparisonGroupDetailsView",setup(n){const c=V();E();const t=g(null),u=g([]),l=g(!1),p=L(()=>u.value.length===0&&!l.value),m=g(!1);let S=0;async function q(){try{return(await k.comparisons.comparisonGroup(c.params.comparisonGroupSlug,!0)).data}catch(o){console.error(o)}}const B=async()=>t.value=await q();async function I(o=0){l.value=!0;try{const e=(await k.comparisons.comparedProducts(h,o,t.value.id)).data;return m.value=e.next!==null,e}catch(e){console.error(e)}finally{l.value=!1}}async function w(o=0){u.value.push(...(await I(o-S)).results)}async function D(o){u.value=u.value.filter(e=>e.id!==o.id),S++}function F(o){const e={maxCalorieProductSlug:{text:"Max calorie",iconComponent:_,classes:"tag-warning"},minCalorieProductSlug:{text:"Min calorie",iconComponent:v,classes:"tag-warning"},maxProteinProductSlug:{text:"Max protein",iconComponent:_,classes:"tag-success"},minProteinProductSlug:{text:"Min protein",iconComponent:v,classes:"tag-success"},maxFatProductSlug:{text:"Max fat",iconComponent:_,classes:"tag-danger"},minFatProductSlug:{text:"Min fat",iconComponent:v,classes:"tag-danger"},maxCarbsProductSlug:{text:"Max carbs",iconComponent:_,classes:"tag-primary"},minCarbsProductSlug:{text:"Min carbs",iconComponent:v,classes:"tag-primary"}},a=[];for(const b in e)o===t.value[b]&&a.push(e[b]);return a}return R(async()=>{await B().then(async()=>{document.title=U(t.value.name),t.value.productsCount>0&&await w()})}),(o,e)=>(s(),C(Y,{"is-loading":!t.value},{default:x(()=>[i(tt,{class:"component-indentation-y","comparison-group-name":t.value.name},null,8,["comparison-group-name"]),p.value?(s(),C(z,{key:1,description:"There are no products in this comparison group to display statistics for...",class:"component-indentation-y"})):(s(),d(f,{key:0},[r("div",it,[r("div",ut,[i(X,{title:"Averages",calories:t.value.caloriesAvg,protein:t.value.proteinAvg,fat:t.value.fatAvg,carbs:t.value.carbsAvg},null,8,["calories","protein","fat","carbs"])]),r("div",lt,[i(ct,{"comparison-group-created-at":t.value.createdAt,"last-product-added-at":t.value.lastAddedProductDatetime,"unique-categories-count":t.value.uniqueCategoriesCount,"compared-products-count":t.value.productsCount},null,8,["comparison-group-created-at","last-product-added-at","unique-categories-count","compared-products-count"])])]),r("div",dt,[(s(!0),d(f,null,y(u.value,a=>(s(),d("div",{key:a.id,id:`product-card-${a.id}`,class:"col-xxl-4 col-xl-4 col-lg-6 col-md-6 col-sm-12 mb-3 position-relative animate__animated animate__fadeIn"},[i(J,{product:a,"category-slug":a.category.slug,"calories-avg":t.value.caloriesAvg,"protein-avg":t.value.proteinAvg,"fat-avg":t.value.fatAvg,"carbs-avg":t.value.carbsAvg,"is-comparison-product":!0,"comparison-group":t.value,tags:F(a.slug),onRemoveButtonClick:D},null,8,["product","category-slug","calories-avg","protein-avg","fat-avg","carbs-avg","comparison-group","tags"])],8,pt))),128)),l.value?(s(!0),d(f,{key:0},y(A(h),a=>(s(),d("div",{key:a,class:"col-xxl-4 col-xl-4 col-lg-6 col-md-6 col-sm-12 mb-3"},[i(K)]))),128)):W("",!0),O(i(M,{padding:0},{default:x(()=>[i(H,{"pagination-type":"limitOffset","offset-increase":A(h),onShowMoreButtonClick:w},null,8,["offset-increase"])]),_:1},512),[[j,!l.value&&m.value]])])],64))]),_:1},8,["is-loading"]))}},wt=P(mt,[["__scopeId","data-v-d2c68da1"]]);export{wt as default};
