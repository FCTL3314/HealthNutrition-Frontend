import{_ as A,o as e,a as _,l as t,f as c,d,y as E,z as R,t as V,x as C,A as F,c as I,m as L,b as m,w as U,F as G,g as S,h as x,B as z,u as N,D as $,e as W,C as Y,p as H,i as J,j as K,k as X,E as Z,q as B,s as Q,P as M}from"./index-37010100.js";import{_ as ee,P as oe}from"./PaginationSection-91738829.js";import{_ as ae,P as te,a as se}from"./ProductCardPlaceholder-6d74e4ec.js";import{E as re}from"./ErrorSection-4afc6416.js";import{B as ne}from"./BaseGreeting-7a9d2e5c.js";import{S as ce}from"./ShowMoreButton-6c2f0642.js";import{L as q}from"./LoadingSpinner-0be97344.js";import{C as ue}from"./CreateComparisonGroupForm-095dc06c.js";import{c as le}from"./pagination-4fca349b.js";import"./CommonCardWithImagePlaceholder-867626af.js";const de={__name:"ProductsGreeting",setup(a){return(o,s)=>(e(),_(ne,{title:"Products Section",description:"Explore our diverse array of products tailored to elevate your journey toward a healthier lifestyle. Discover essential resources designed to support your wellness goals. Simplify your pursuit of a balanced and wholesome lifestyle with our curated selection of products."}))}},ie=A(de,[["__scopeId","data-v-f8b3df3d"]]);const pe={class:"save-product-checkbox d-flex"},me={class:"save-checkbox-wrp"},ve=["id"],fe=["for"],_e={__name:"AddProductToComparisonGroupCheckbox",props:{productId:{type:Number,required:!0},comparisonGroup:{type:Object,required:!0},isInitiallyChecked:{type:Boolean,default:!1}},setup(a){const o=a,s=t(!1),r=t(o.isInitiallyChecked);async function u(){s.value=!0;try{r.value?await C.comparisons.addProductToComparisonGroup(o.comparisonGroup.id,o.productId):await C.comparisons.removeProductFromComparisonGroup(o.comparisonGroup.id,o.productId)}catch(i){console.error(i)}finally{s.value=!1}}return(i,l)=>(e(),c("div",pe,[d("div",me,[s.value?(e(),_(q,{key:1,size:24})):E((e(),c("input",{key:0,onChange:u,"onUpdate:modelValue":l[0]||(l[0]=y=>r.value=y),id:`${a.comparisonGroup.name}-${a.comparisonGroup.id}`,class:"save-checkbox shadow-none mt-0",type:"checkbox"},null,40,ve)),[[R,r.value]])]),d("label",{class:"form-check-label fw-medium ms-3 text-truncate",for:`${a.comparisonGroup.name}-${a.comparisonGroup.id}`},V(a.comparisonGroup.name),9,fe)]))}},ye=A(_e,[["__scopeId","data-v-7274df8f"]]);const ge=a=>(H("data-v-d05c15a3"),a=a(),J(),a),he={class:"modal fade",id:"saveProductModal",tabindex:"-1","aria-labelledby":"saveProductModalLabel","aria-hidden":"true"},Ce={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable mx-auto"},be=ge(()=>d("div",{class:"modal-header"},[d("h1",{class:"text-main fs-5 mb-0",id:"saveProductModalLabel"}," Save product to... "),d("button",{type:"button",class:"btn-close shadow-none","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),we={class:"modal-body"},ke={key:0,class:"fw-medium mb-0"},Pe={key:1,class:"text-center centered justify-content-center"},Ge={class:"modal-footer justify-content-center"},xe={__name:"AddProductToComparisonGroupsModal",props:{productId:{type:Number,required:!0}},setup(a){const o=a;F(()=>o.productId,async()=>{s.value.length=0,await g()});const s=t([]),r=I(()=>s.value.length===0&&!u.value),u=t(!1),i=t(!1),l=t(!1),y=()=>l.value=!0;async function w(p=0){u.value=!0;try{const f=(await C.comparisons.comparisonGroups($,p,o.productId)).data;return i.value=f.next!==null,f}catch(f){console.error(f)}finally{u.value=!1}}async function g(p=0){s.value.push(...(await w(p)).results)}const v=p=>s.value.unshift(p);return L(async()=>{o.productId>=0&&await g()}),(p,f)=>(e(),c("div",he,[d("div",Ce,[m(Y,{class:"modal-content"},{default:U(()=>[be,d("div",we,[(e(!0),c(G,null,S(s.value,b=>(e(),_(ye,{key:b.id,"product-id":a.productId,"comparison-group":b,"is-initially-checked":b.isContainsSelectedProduct},null,8,["product-id","comparison-group","is-initially-checked"]))),128)),r.value?(e(),c("p",ke," It looks like you don't have any comparison groups yet, but you can create one using the form below. ")):x("",!0),E((e(),_(ce,{class:"mt-3","pagination-type":"limitOffset","offset-increase":N($),key:a.productId,onShowMoreButtonClick:g},null,8,["offset-increase"])),[[z,i.value&&!u.value]]),u.value?(e(),c("div",Pe,[m(q,{size:24})])):x("",!0)]),d("div",Ge,[l.value?(e(),_(ue,{key:0,onComparisonGroupCreated:v,class:"m-0"})):(e(),c("button",{key:1,onClick:y,class:"btn text-main centered-vertically justify-content-center common-rounding w-100 m-0"},[m(ae,{class:"me-1",height:24,width:24}),W(" Create new group ")]))])]),_:1})])]))}},Ie=A(xe,[["__scopeId","data-v-d05c15a3"]]),Se={class:"component-indentation-y"},je={__name:"ProductsView",setup(a){const o=K(),s=X(),r=t(null),u=t([]),i=t(!1),l=t(!1),y=I(()=>i.value||l.value),w=I(()=>!y.value&!u.value.length),g=t(-1),v=t(parseInt(o.query.page||1)),p=t(0),f=n=>g.value=n;async function b(){i.value=!0;try{return(await C.categories.category(o.params.categorySlug)).data}catch(n){console.error(n)}finally{i.value=!1}}async function O(){r.value=await b()}async function j(n=null){l.value=!0;try{return n||o.query.search?(await C.products.products(v.value,null,n||o.query.search)).data:(await C.products.products(v.value,o.params.categorySlug)).data}catch(h){console.error(h)}finally{l.value=!1}}async function k(n=null){n&&(v.value=1,await B(s,o,{page:1}));const h=await j(n);h&&(u.value=h.results,p.value=le(h.count,M))}const T=t(null);async function D(n){v.value=n,await B(s,o,{page:n}),Q(T.value),await k()}return L(async()=>{await O().then(async()=>{await k(),document.title=Z(r.value.name)})}),(n,h)=>(e(),c(G,null,[m(Ie,{"product-id":g.value},null,8,["product-id"]),m(ie,{class:"component-indentation-y"}),d("div",Se,[m(ee,{class:"mb-3","placeholder-text":"Enter a query, for example mango...","show-clear-search-button":!l.value,onSearchInput:k,onClearSearch:k},null,8,["show-clear-search-button"]),d("div",{class:"row",ref_key:"productsWrapperElement",ref:T},[y.value?(e(!0),c(G,{key:1},S(N(M),P=>(e(),c("div",{key:P,class:"col-lg-4 col-md-6 mb-3"},[m(se)]))),128)):(e(!0),c(G,{key:0},S(u.value,P=>(e(),c("div",{key:P.id,class:"col-lg-4 col-md-6 mb-3 animate__animated animate__fadeIn"},[m(te,{product:P,"category-slug":r.value.slug,"calories-avg":r.value.caloriesAvg,"protein-avg":r.value.proteinAvg,"fat-avg":r.value.fatAvg,"carbs-avg":r.value.carbsAvg,onSaveButtonClick:f},null,8,["product","category-slug","calories-avg","protein-avg","fat-avg","carbs-avg"])]))),128))],512),w.value?(e(),_(re,{key:0,description:"Oops... Looks like we couldn't find any products.","show-go-back-button":!1})):x("",!0),w.value?x("",!0):(e(),_(oe,{key:1,"total-pages":p.value,"current-page":v.value,"is-disabled":l.value,onPageChanged:D},null,8,["total-pages","current-page","is-disabled"]))])],64))}};export{je as default};
