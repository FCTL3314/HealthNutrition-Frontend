import{_ as $,o as e,a as g,l as r,f as c,d as l,y as N,z as D,t as V,x as C,A as F,B as U,c as I,m as q,D as z,b as v,w as W,F as x,g as T,h as k,E as Y,u as O,G as M,e as H,C as J,p as K,i as X,j as Z,k as Q,H as ee,q as E,s as oe,P as L}from"./index-f9156b00.js";import{_ as ae,P as te}from"./PaginationSection-6adbb9e9.js";import{_ as se,P as re,a as ne}from"./ProductCardPlaceholder-349f0c50.js";import{E as ce}from"./ErrorSection-6be8532e.js";import{B as ue}from"./BaseGreeting-16f3b885.js";import{S as le}from"./ShowMoreButton-5bd1dd7c.js";import{L as R}from"./LoadingSpinner-ce5a1d0f.js";import{C as de}from"./CreateComparisonGroupForm-893bbf2d.js";import{c as ie}from"./pagination-4fca349b.js";import"./CommonCardWithImagePlaceholder-98e8d04f.js";const pe={__name:"ProductsGreeting",setup(a){return(o,d)=>(e(),g(ue,{title:"Products Section",description:"Explore our diverse array of products tailored to elevate your journey toward a healthier lifestyle. Discover essential resources designed to support your wellness goals. Simplify your pursuit of a balanced and wholesome lifestyle with our curated selection of products."}))}},me=$(pe,[["__scopeId","data-v-f8b3df3d"]]);const ve={class:"save-product-checkbox d-flex"},fe={class:"save-checkbox-wrp"},_e=["id"],ye=["for"],ge={__name:"AddProductToComparisonGroupCheckbox",props:{productId:{type:Number,required:!0},comparisonGroup:{type:Object,required:!0},isInitiallyChecked:{type:Boolean,default:!1}},setup(a){const o=a,d=r(!1),t=r(o.isInitiallyChecked);async function u(){d.value=!0;try{t.value?await C.comparisons.addProductToComparisonGroup(o.comparisonGroup.id,o.productId):await C.comparisons.removeProductFromComparisonGroup(o.comparisonGroup.id,o.productId)}catch(i){console.error(i)}finally{d.value=!1}}return(i,s)=>(e(),c("div",ve,[l("div",fe,[d.value?(e(),g(R,{key:1,size:24})):N((e(),c("input",{key:0,onChange:u,"onUpdate:modelValue":s[0]||(s[0]=f=>t.value=f),id:`${a.comparisonGroup.name}-${a.comparisonGroup.id}`,class:"save-checkbox shadow-none mt-0",type:"checkbox"},null,40,_e)),[[D,t.value]])]),l("label",{class:"form-check-label fw-medium ms-3 text-truncate",for:`${a.comparisonGroup.name}-${a.comparisonGroup.id}`},V(a.comparisonGroup.name),9,ye)]))}},he=$(ge,[["__scopeId","data-v-7274df8f"]]);const be=a=>(K("data-v-6dbb3f98"),a=a(),X(),a),Ce={key:0,class:"modal fade",id:"saveProductModal",tabindex:"-1","aria-labelledby":"saveProductModalLabel","aria-hidden":"true"},we={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable mx-auto"},ke=be(()=>l("div",{class:"modal-header"},[l("h1",{class:"text-main fs-5 mb-0",id:"saveProductModalLabel"}," Save product to... "),l("button",{type:"button",class:"btn-close shadow-none","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Pe={class:"modal-body"},Ge={key:0,class:"fw-medium mb-0"},xe={key:1,class:"text-center centered justify-content-center"},Ie={class:"modal-footer justify-content-center"},Se={__name:"AddProductToComparisonGroupsModal",props:{productId:{type:Number,required:!0}},setup(a){const o=a;F(()=>o.productId,async()=>{u.value.length=0,await h()});const d=U(),t=I(()=>d.getters["auth/user"]),u=r([]),i=I(()=>u.value.length===0&&!s.value),s=r(!1),f=r(!1),w=r(!1),P=()=>w.value=!0;async function _(p=0){s.value=!0;try{const y=(await C.comparisons.comparisonGroups(M,p,o.productId)).data;return f.value=y.next!==null,y}catch(y){console.error(y)}finally{s.value=!1}}async function h(p=0){u.value.push(...(await _(p)).results)}const S=p=>u.value.unshift(p),A={name:"logIn"};return q(async()=>{if(!t.value){await z.push(A);return}o.productId>=0&&await h()}),(p,y)=>t.value?(e(),c("div",Ce,[l("div",we,[v(J,{class:"modal-content"},{default:W(()=>[ke,l("div",Pe,[(e(!0),c(x,null,T(u.value,m=>(e(),g(he,{key:m.id,"product-id":a.productId,"comparison-group":m,"is-initially-checked":m.isContainsSelectedProduct},null,8,["product-id","comparison-group","is-initially-checked"]))),128)),i.value?(e(),c("p",Ge," It looks like you don't have any comparison groups yet, but you can create one using the form below. ")):k("",!0),N((e(),g(le,{class:"mt-3","pagination-type":"limitOffset","offset-increase":O(M),key:a.productId,onShowMoreButtonClick:h},null,8,["offset-increase"])),[[Y,f.value&&!s.value]]),s.value?(e(),c("div",xe,[v(R,{size:24})])):k("",!0)]),l("div",Ie,[w.value?(e(),g(de,{key:0,onComparisonGroupCreated:S,class:"m-0"})):(e(),c("button",{key:1,onClick:P,class:"btn text-main centered-vertically justify-content-center common-rounding w-100 m-0"},[v(se,{class:"me-1",height:24,width:24}),H(" Create new group ")]))])]),_:1})])])):k("",!0)}},Ae=$(Se,[["__scopeId","data-v-6dbb3f98"]]),Te={class:"component-indentation-y"},De={__name:"ProductsView",setup(a){const o=Z(),d=Q(),t=r(null),u=r([]),i=r(!1),s=r(!1),f=I(()=>i.value||s.value),w=I(()=>!f.value&!u.value.length),P=r(-1),_=r(parseInt(o.query.page||1)),h=r(0),S=n=>P.value=n;async function A(){i.value=!0;try{return(await C.categories.category(o.params.categorySlug)).data}catch(n){console.error(n)}finally{i.value=!1}}async function p(){t.value=await A()}async function y(n=null){s.value=!0;try{return n||o.query.search?(await C.products.products(_.value,null,n||o.query.search)).data:(await C.products.products(_.value,o.params.categorySlug)).data}catch(b){console.error(b)}finally{s.value=!1}}async function m(n=null){n&&(_.value=1,await E(d,o,{page:1}));const b=await y(n);b&&(u.value=b.results,h.value=ie(b.count,L))}const B=r(null);async function j(n){_.value=n,await E(d,o,{page:n}),oe(B.value),await m()}return q(async()=>{await p().then(async()=>{await m(),document.title=ee(t.value.name)})}),(n,b)=>(e(),c(x,null,[v(Ae,{"product-id":P.value},null,8,["product-id"]),v(me,{class:"component-indentation-y"}),l("div",Te,[v(ae,{class:"mb-3","placeholder-text":"Enter a query, for example mango...","show-clear-search-button":!s.value,onSearchInput:m,onClearSearch:m},null,8,["show-clear-search-button"]),l("div",{class:"row",ref_key:"productsWrapperElement",ref:B},[f.value?(e(!0),c(x,{key:1},T(O(L),G=>(e(),c("div",{key:G,class:"col-lg-4 col-md-6 mb-3"},[v(ne)]))),128)):(e(!0),c(x,{key:0},T(u.value,G=>(e(),c("div",{key:G.id,class:"col-lg-4 col-md-6 mb-3 animate__animated animate__fadeIn"},[v(re,{product:G,"category-slug":t.value.slug,"calories-avg":t.value.caloriesAvg,"protein-avg":t.value.proteinAvg,"fat-avg":t.value.fatAvg,"carbs-avg":t.value.carbsAvg,onSaveButtonClick:S},null,8,["product","category-slug","calories-avg","protein-avg","fat-avg","carbs-avg"])]))),128))],512),w.value?(e(),g(ce,{key:0,description:"Oops... Looks like we couldn't find any products.","show-go-back-button":!1})):k("",!0),w.value?k("",!0):(e(),g(te,{key:1,"total-pages":h.value,"current-page":_.value,"is-disabled":s.value,onPageChanged:j},null,8,["total-pages","current-page","is-disabled"]))])],64))}};export{De as default};
