import{o,f as n,d as e,_ as N,a as m,bc as U,h as F,t as r,n as l,I as q,l as k,bU as H,m as V,r as W,w as b,b as u,e as A,F as _,g as T,aT as Y,u as M,C as J,x as K,bS as Q,N as X,p as R,i as L}from"./index-b028e6ee.js";import{C as Z,a as ee}from"./CommonCardWithImagePlaceholder-e915cddd.js";import{L as te}from"./LoadingSpinner-a20576e0.js";const se=["width","height"],oe=e("path",{"fill-rule":"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"},null,-1),ae=[oe],ne={__name:"PlusIcon",props:{width:{type:Number,default:16},height:{type:Number,default:16}},setup(t){return(c,s)=>(o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,fill:"currentColor",class:"bi bi-plus-lg",viewBox:"0 0 16 16"},ae,8,se))}},ce=["width","height"],re=e("path",{"fill-rule":"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8"},null,-1),le=[re],ie={__name:"MinusIcon",props:{width:{type:Number,default:16},height:{type:Number,default:16}},setup(t){return(c,s)=>(o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,fill:"currentColor",class:"bi bi-dash-lg",viewBox:"0 0 16 16"},le,8,ce))}};const de={class:"fw-semibold"},ue={__name:"TheTag",props:{text:{type:String,required:!0},iconComponent:{type:Object},classes:{type:String,default:"tag-primary"}},setup(t){return(c,s)=>(o(),n("div",{class:l(["tag centered-vertically",t.classes])},[t.iconComponent?(o(),m(U(t.iconComponent),{key:0,class:"me-1"})):F("",!0),e("span",de,r(t.text),1)],2))}},pe=N(ue,[["__scopeId","data-v-7c1039f2"]]),he=["width","height"],_e=e("path",{d:"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022"},null,-1),me=[_e],ge={__name:"CheckIcon",props:{width:{type:Number,default:16},height:{type:Number,default:16}},setup(t){return(c,s)=>(o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,fill:"currentColor",class:"bi bi-check-lg",viewBox:"0 0 16 16"},me,8,he))}};const P=t=>(R("data-v-e111e654"),t=t(),L(),t),fe={class:"card-img-wrp"},ve=["src"],be={class:"card-body d-flex flex-column"},ye={class:"card-title font-standard text-main text-truncate"},Ce={class:"card-text font-small"},xe={key:0,class:"tags px-3"},we={class:"list-group list-group-flush"},ke={class:"list-group-item fw-semibold text-center"},Ne=P(()=>e("span",{class:"text-main-light"},"Healthfulness",-1)),Pe={class:"progress"},$e={class:"fw-semibold"},Se={class:"list-group-item text-center px-0 pb-0"},Ie=P(()=>e("span",{class:"ms-1"},"Removing...",-1)),Be=P(()=>e("span",{class:"ms-1"},"Remove",-1)),Ae={__name:"ProductCard",props:{product:{type:Object,required:!0},caloriesAvg:{type:Number},proteinAvg:{type:Number},fatAvg:{type:Number},carbsAvg:{type:Number},categorySlug:{type:String,required:!0},isComparisonProduct:{type:Boolean,default:!1},comparisonGroup:{type:Object},tags:{type:Object}},emits:["saveButtonClick","removeButtonClick"],setup(t,{emit:c}){const s=t,p=q(),y=k(!1),$=k(!1),D=()=>c("saveButtonClick",s.product.id),C=k(null);async function E(){y.value=!0;try{(await K.comparisons.removeProductFromComparisonGroup(s.comparisonGroup.id,s.product.id)).status===204&&($.value=!0,setTimeout(()=>{C.value.$el.classList.add("animate__animated","animate__bounceOut"),C.value.$el.addEventListener("animationend",async()=>{c("removeButtonClick",s.product)})},Q))}catch(i){console.error(i)}}const S=Math.round(s.product.healthfulness/H*100);function O(i,h){return i?h?"text-success":"text-danger":h?"text-danger":"text-success"}function f(i,h,v,a,d,B){const x=parseFloat((a-d).toFixed(X)),w=x>=0,z=Math.abs(x),G=O(B,w);return{name:i,colorClass:h,differenceColorClass:G,differenceSymbol:w?"+":"-",units:v,value:a,avgValue:d,difference:x,normalizedDifference:z,isDifferencePositive:w,isMoreBetter:B}}const j=[f("Calories","text-warning","kcal",s.product.nutrition.calories,s.caloriesAvg,p.getters["nutrition/isMoreCaloriesBetter"]),f("Protein","text-success","g.",s.product.nutrition.protein,s.proteinAvg,p.getters["nutrition/isMoreProteinBetter"]),f("Fat","text-danger","g.",s.product.nutrition.fat,s.fatAvg,p.getters["nutrition/isMoreFatBetter"]),f("Carbs","text-primary","g.",s.product.nutrition.carbs,s.carbsAvg,p.getters["nutrition/isMoreCarbsBetter"])],I={name:"product",params:{categorySlug:s.categorySlug,productSlug:s.product.slug}};return V(()=>{s.isComparisonProduct&&!s.comparisonGroup&&console.error("Property 'comparisonGroup' is required when isComparisonProduct is set to true.")}),(i,h)=>{const v=W("router-link");return o(),m(J,{ref_key:"cardComponent",ref:C,class:"card common-rounding h-100 z-0"},{default:b(()=>[u(v,{to:I},{default:b(()=>[e("div",fe,[e("img",{src:t.product.image,class:"card-img-responsive card-img-top object-fit-cover",alt:"product-image"},null,8,ve)])]),_:1}),e("div",be,[e("h5",ye,[u(v,{class:"link-main fw-semibold",to:I},{default:b(()=>[A(r(t.product.name),1)]),_:1})]),e("p",Ce,r(t.product.shortDescription),1)]),t.tags?(o(),n("div",xe,[(o(!0),n(_,null,T(t.tags,(a,d)=>(o(),m(pe,{key:d,text:a.text,"icon-component":a.iconComponent,classes:a.classes,class:"mb-2 me-2"},null,8,["text","icon-component","classes"]))),128))])):F("",!0),e("ul",we,[e("li",ke,[Ne,e("div",Pe,[e("div",{class:"progress-bar",style:Y({width:`${M(S)}%`})},r(M(S))+"% ",5)])]),(o(),n(_,null,T(j,(a,d)=>e("li",{key:d,class:l(["list-group-item centered-vertically",a.colorClass])},[u(Z),e("span",$e,"  "+r(a.name)+": "+r(a.value)+" "+r(a.units)+"  ",1),e("span",{class:l(a.differenceColorClass)},r(a.differenceSymbol)+r(a.normalizedDifference)+" "+r(a.units),3)],2)),64)),e("li",Se,[t.isComparisonProduct?(o(),n(_,{key:0},[$.value?(o(),m(ge,{key:1,width:38,height:38,class:"mx-auto centered text-success animate__animated animate__zoomIn animate__faster"})):(o(),n("button",{key:0,onClick:E,class:l(["btn btn-outline-danger centered-vertically justify-content-center common-rounding w-100 m-0",{disabled:y.value}])},[y.value?(o(),n(_,{key:0},[u(te,{size:24,"color-class":"text-danger"}),Ie],64)):(o(),n(_,{key:1},[u(ie,{width:24,height:24}),Be],64))],2))],64)):(o(),n("button",{key:1,onClick:D,class:"btn btn-outline-primary centered-vertically justify-content-center common-rounding w-100 m-0","data-bs-toggle":"modal","data-bs-target":"#saveProductModal"},[u(ne,{class:"me-1",width:24,height:24}),A(" Save ")]))])])]),_:1},512)}}},Ue=N(Ae,[["__scopeId","data-v-e111e654"]]);const g=t=>(R("data-v-d9df48a5"),t=t(),L(),t),Te=g(()=>e("p",{class:"card-text placeholder-glow mb-1"},[e("span",{class:"placeholder col-12 bg-primary"})],-1)),Me={class:"card-text placeholder-glow"},Fe=g(()=>e("span",{class:"placeholder col-7 bg-warning"},null,-1)),Re=g(()=>e("span",{class:"placeholder col-6 bg-success"},null,-1)),Le=g(()=>e("span",{class:"placeholder col-8 bg-danger"},null,-1)),De=g(()=>e("span",{class:"placeholder col-7 bg-primary"},null,-1)),Ee={__name:"ProductCardPlaceholder",setup(t){const c=()=>Math.random()>=.5?"bg-success":"bg-danger";return(s,p)=>(o(),m(ee,null,{"card-bottom":b(()=>[Te,e("p",Me,[Fe,e("span",{class:l(["placeholder col-1",c()])},null,2),Re,e("span",{class:l(["placeholder col-1",c()])},null,2),Le,e("span",{class:l(["placeholder col-1",c()])},null,2),De,e("span",{class:l(["placeholder col-1",c()])},null,2)])]),_:1}))}},qe=N(Ee,[["__scopeId","data-v-d9df48a5"]]);export{Ue as P,ne as _,qe as a};
