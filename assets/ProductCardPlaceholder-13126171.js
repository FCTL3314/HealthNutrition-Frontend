import{o,f as n,d as e,_ as N,a as m,bc as V,h as F,t as r,n as l,I as H,l as k,bU as W,m as Y,r as J,w as b,b as p,e as M,F as _,g as R,aT as K,u as P,C as Q,bV as X,bW as Z,x as ee,bS as te,N as se,p as L,i as D}from"./index-ae780996.js";import{C as oe,a as ae}from"./CommonCardWithImagePlaceholder-2dc25517.js";import{L as ne}from"./LoadingSpinner-01ee2b08.js";const ce=["width","height"],re=e("path",{"fill-rule":"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"},null,-1),le=[re],ie={__name:"PlusIcon",props:{width:{type:Number,default:16},height:{type:Number,default:16}},setup(t){return(c,s)=>(o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,fill:"currentColor",class:"bi bi-plus-lg",viewBox:"0 0 16 16"},le,8,ce))}},de=["width","height"],ue=e("path",{"fill-rule":"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8"},null,-1),pe=[ue],he={__name:"MinusIcon",props:{width:{type:Number,default:16},height:{type:Number,default:16}},setup(t){return(c,s)=>(o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,fill:"currentColor",class:"bi bi-dash-lg",viewBox:"0 0 16 16"},pe,8,de))}};const _e={class:"fw-semibold"},me={__name:"TheTag",props:{text:{type:String,required:!0},iconComponent:{type:Object},classes:{type:String,default:"tag-primary"}},setup(t){return(c,s)=>(o(),n("div",{class:l(["tag centered-vertically",t.classes])},[t.iconComponent?(o(),m(V(t.iconComponent),{key:0,class:"me-1"})):F("",!0),e("span",_e,r(t.text),1)],2))}},ge=N(me,[["__scopeId","data-v-7c1039f2"]]),fe=["width","height"],ve=e("path",{d:"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022"},null,-1),be=[ve],ye={__name:"CheckIcon",props:{width:{type:Number,default:16},height:{type:Number,default:16}},setup(t){return(c,s)=>(o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,fill:"currentColor",class:"bi bi-check-lg",viewBox:"0 0 16 16"},be,8,fe))}};const $=t=>(L("data-v-fc6c8f1b"),t=t(),D(),t),Ce={class:"card-img-wrp"},we=["src"],xe={class:"card-body d-flex flex-column"},ke={class:"card-title font-standard text-main text-truncate"},Pe={class:"card-text font-small"},Ne={key:0,class:"tags px-3"},$e={class:"list-group list-group-flush"},Se={class:"list-group-item fw-semibold text-center"},Ie=$(()=>e("span",{class:"text-main-light"},"Healthfulness",-1)),Be={class:"progress"},Ae={class:"fw-semibold"},Te={class:"list-group-item text-center px-0 pb-0"},Me=$(()=>e("span",{class:"ms-1"},"Removing...",-1)),Re=$(()=>e("span",{class:"ms-1"},"Remove",-1)),Fe=["data-bs-target"],Le={__name:"ProductCard",props:{product:{type:Object,required:!0},caloriesAvg:{type:Number},proteinAvg:{type:Number},fatAvg:{type:Number},carbsAvg:{type:Number},categorySlug:{type:String,required:!0},isComparisonProduct:{type:Boolean,default:!1},comparisonGroup:{type:Object},tags:{type:Object}},emits:["saveButtonClick","removeButtonClick"],setup(t,{emit:c}){const s=t,d=H(),S=d.getters["auth/user"],y=k(!1),I=k(!1),E={name:"logIn"};async function O(){if(!S){await X.push(E),Z.error("Please log in so you can save products.");return}c("saveButtonClick",s.product.id)}const C=k(null);async function j(){y.value=!0;try{(await ee.comparisons.removeProductFromComparisonGroup(s.comparisonGroup.id,s.product.id)).status===204&&(I.value=!0,setTimeout(()=>{C.value.$el.classList.add("animate__animated","animate__bounceOut"),C.value.$el.addEventListener("animationend",async()=>{c("removeButtonClick",s.product)})},te))}catch(i){console.error(i)}}const B=Math.round(s.product.healthfulness/W*100);function z(i,h){return i?h?"text-success":"text-danger":h?"text-danger":"text-success"}function f(i,h,v,a,u,T){const w=parseFloat((a-u).toFixed(se)),x=w>=0,U=Math.abs(w),q=z(T,x);return{name:i,colorClass:h,differenceColorClass:q,differenceSymbol:x?"+":"-",units:v,value:a,avgValue:u,difference:w,normalizedDifference:U,isDifferencePositive:x,isMoreBetter:T}}const G=[f("Calories","text-warning","kcal",s.product.nutrition.calories,s.caloriesAvg,d.getters["nutrition/isMoreCaloriesBetter"]),f("Protein","text-success","g.",s.product.nutrition.protein,s.proteinAvg,d.getters["nutrition/isMoreProteinBetter"]),f("Fat","text-danger","g.",s.product.nutrition.fat,s.fatAvg,d.getters["nutrition/isMoreFatBetter"]),f("Carbs","text-primary","g.",s.product.nutrition.carbs,s.carbsAvg,d.getters["nutrition/isMoreCarbsBetter"])],A={name:"product",params:{categorySlug:s.categorySlug,productSlug:s.product.slug}};return Y(()=>{s.isComparisonProduct&&!s.comparisonGroup&&console.error("Property 'comparisonGroup' is required when isComparisonProduct is set to true.")}),(i,h)=>{const v=J("router-link");return o(),m(Q,{ref_key:"cardComponent",ref:C,class:"card common-rounding h-100 z-0"},{default:b(()=>[p(v,{to:A},{default:b(()=>[e("div",Ce,[e("img",{src:t.product.image,class:"card-img-responsive card-img-top object-fit-cover",alt:"product-image"},null,8,we)])]),_:1}),e("div",xe,[e("h5",ke,[p(v,{class:"link-main fw-semibold",to:A},{default:b(()=>[M(r(t.product.name),1)]),_:1})]),e("p",Pe,r(t.product.shortDescription),1)]),t.tags?(o(),n("div",Ne,[(o(!0),n(_,null,R(t.tags,(a,u)=>(o(),m(ge,{key:u,text:a.text,"icon-component":a.iconComponent,classes:a.classes,class:"mb-2 me-2"},null,8,["text","icon-component","classes"]))),128))])):F("",!0),e("ul",$e,[e("li",Se,[Ie,e("div",Be,[e("div",{class:"progress-bar",style:K({width:`${P(B)}%`})},r(P(B))+"% ",5)])]),(o(),n(_,null,R(G,(a,u)=>e("li",{key:u,class:l(["list-group-item centered-vertically",a.colorClass])},[p(oe),e("span",Ae,"  "+r(a.name)+": "+r(a.value)+" "+r(a.units)+"  ",1),e("span",{class:l(a.differenceColorClass)},r(a.differenceSymbol)+r(a.normalizedDifference)+" "+r(a.units),3)],2)),64)),e("li",Te,[t.isComparisonProduct?(o(),n(_,{key:0},[I.value?(o(),m(ye,{key:1,width:38,height:38,class:"mx-auto centered text-success animate__animated animate__zoomIn animate__faster"})):(o(),n("button",{key:0,onClick:j,class:l(["btn btn-outline-danger centered-vertically justify-content-center common-rounding w-100 m-0",{disabled:y.value}])},[y.value?(o(),n(_,{key:0},[p(ne,{size:24,"color-class":"text-danger"}),Me],64)):(o(),n(_,{key:1},[p(he,{width:24,height:24}),Re],64))],2))],64)):(o(),n("button",{key:1,onClick:O,class:"btn btn-outline-primary centered-vertically justify-content-center common-rounding w-100 m-0","data-bs-toggle":"modal","data-bs-target":P(S)?"#saveProductModal":""},[p(ie,{class:"me-1",width:24,height:24}),M(" Save ")],8,Fe))])])]),_:1},512)}}},Ye=N(Le,[["__scopeId","data-v-fc6c8f1b"]]);const g=t=>(L("data-v-d9df48a5"),t=t(),D(),t),De=g(()=>e("p",{class:"card-text placeholder-glow mb-1"},[e("span",{class:"placeholder col-12 bg-primary"})],-1)),Ee={class:"card-text placeholder-glow"},Oe=g(()=>e("span",{class:"placeholder col-7 bg-warning"},null,-1)),je=g(()=>e("span",{class:"placeholder col-6 bg-success"},null,-1)),ze=g(()=>e("span",{class:"placeholder col-8 bg-danger"},null,-1)),Ge=g(()=>e("span",{class:"placeholder col-7 bg-primary"},null,-1)),Ue={__name:"ProductCardPlaceholder",setup(t){const c=()=>Math.random()>=.5?"bg-success":"bg-danger";return(s,d)=>(o(),m(ae,null,{"card-bottom":b(()=>[De,e("p",Ee,[Oe,e("span",{class:l(["placeholder col-1",c()])},null,2),je,e("span",{class:l(["placeholder col-1",c()])},null,2),ze,e("span",{class:l(["placeholder col-1",c()])},null,2),Ge,e("span",{class:l(["placeholder col-1",c()])},null,2)])]),_:1}))}},Je=N(Ue,[["__scopeId","data-v-d9df48a5"]]);export{Ye as P,ie as _,Je as a};
