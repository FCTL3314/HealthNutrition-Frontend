import{I as E,l as g,L as m,o as v,a as h,w as y,u as e,x as $,bY as x,bW as V,d as a,y as d,G as c,n as p,b as u}from"./index-a402d96c.js";import{u as U,g as f,_ as w,e as k,r as q}from"./validation-4a377483.js";import{_ as B}from"./BaseTab-12103b9a.js";import{p as C}from"./vuelidate-e01301f1.js";import"./FormFlushMessages-ab00ce08.js";import"./SubmitButton-006c576b.js";const N={class:"mb-4"},T=a("label",{for:"email",class:"form-label text-main"},"New email",-1),D={class:"mb-4"},F=a("label",{class:"form-label text-main"},"Password",-1),L={__name:"EmailTab",setup(M){const _=E(),t=g(!1),r=m({newEmail:"",password:""}),s=U({newEmail:{email:k,required:q},password:C},r),i=m([]);async function b(){t.value=!0,i.length=0;try{const o=(await $.users.changeEmail({newEmail:r.newEmail,password:r.password})).data;_.commit("auth/setEmail",o.email),x.success("Your email has been successfully changed.")}catch(o){i.push(...V(o.request.response)),console.log(o.request)}finally{s.value.$reset(),t.value=!1}}return(o,l)=>(v(),h(B,{"tab-name":"Email Settings",v$:e(s),"error-messages":i,"is-response-waiting":t.value,"form-submit-callback":b},{default:y(()=>[a("div",N,[T,d(a("input",{id:"email","onUpdate:modelValue":l[0]||(l[0]=n=>e(s).newEmail.$model=n),type:"email",class:p(["form-control only-bottom-border",e(f)(e(s).newEmail)]),placeholder:"Enter email"},null,2),[[c,e(s).newEmail.$model]]),u(w,{field:e(s).newEmail},null,8,["field"])]),a("div",D,[F,d(a("input",{"onUpdate:modelValue":l[1]||(l[1]=n=>e(s).password.$model=n),type:"password",class:p(["form-control only-bottom-border",e(f)(e(s).password)]),placeholder:"Enter password"},null,2),[[c,e(s).password.$model]]),u(w,{field:e(s).password},null,8,["field"])])]),_:1},8,["v$","error-messages","is-response-waiting"]))}};export{L as default};
